"use strict";var nexusApp=angular.module("nexusApp",["ngRoute","nexusCtrl"]),nexusCtrl=angular.module("nexusCtrl",[]);nexusCtrl.controller("homeCtrl",["$location","$scope",function(){}]).controller("siteCtrl",["$location","$scope",function(){var e=$(".header").find(".menu > .bar-nav"),t=$(".header").find(".menu > a");t.removeClass("active-btn"),t.eq(1).addClass("active-btn"),e.css({width:t.eq(1).innerWidth()+"px",left:t.eq(1).position().left+"px"})}]).controller("calcCtrl",["$location","$scope",function(){}]).controller("thirdCtrl",["$location","$scope",function(){var e=$(".header").find(".menu > .bar-nav"),t=$(".header").find(".menu > a");t.removeClass("active-btn"),t.eq(2).addClass("active-btn"),e.css({width:t.eq(2).innerWidth()+"px",left:t.eq(2).position().left+"px"})}]).controller("applicationCtrl",["$location","$scope",function(){var e=$(".header").find(".menu > .bar-nav"),t=$(".header").find(".menu > a");t.removeClass("active-btn"),t.eq(3).addClass("active-btn"),e.css({width:t.eq(3).innerWidth()+"px",left:t.eq(3).position().left+"px"})}]).controller("aboutCtrl",["$location","$scope",function(e,t){t.data={social:[{id:"google",xlink:"#google",url:"https://plus.google.com/u/0/116298012878227766967/about"},{id:"facebook",xlink:"#facebook",url:"https://www.facebook.com/nexus.studio.bel/timeline#"},{id:"vk",xlink:"#vk",url:"http://vk.com/nexusstudioru"},{id:"youtube",xlink:"#youtube",url:"http://www.youtube.com/channel/UCbWoURkJ5nXueJQjWpXEraA?guided_help_flow=3"}],labels:[{type:"text",lbl:"Ваше имя (обязательно)",name:"name"},{type:"email",lbl:"Ваш E-mail (обязательно)",name:"mail"},{type:"tel",lbl:"Ваш номер (необязательно)",name:"phone"}]};var l=$(".header").find(".menu > .bar-nav"),n=$(".header").find(".menu > a");n.removeClass("active-btn"),n.eq(4).addClass("active-btn"),l.css({width:n.eq(4).innerWidth()+"px",left:n.eq(4).position().left+"px"}),$("#send-mail").on("click",function(){var e=$("input[name=name]").val(),t=$("input[name=mail]").val(),l=$("textarea[name=text]").val();if(""!=e&&""!=t&&""!=l){var n=$("#form-send-mail").serialize();$.ajax({type:"GET",url:"release/php/mail.php",data:n}).done(function(e){alert(e)})}else alert("Заполните все обязательные поля!")})}]).controller("noneCtrl",["$location","$scope",function(){}]),nexusApp.directive("myCalc",function(){return{restrict:"E",templateUrl:"../release/tpl/my-calc.html",replace:!0,controller:["$scope",function(){function e(e){var t=$(".block");for(l=0;l<e.length;l++)e[l]=parseInt(e[l],10),t.eq(e[l]-1).addClass("show-block").removeClass("hide-block")}function t(e){var t=$(".block");for(l=0;l<e.length;l++)e[l]=parseInt(e[l],10),t.eq(e[l]-1).addClass("hide-block").removeClass("show-block")}var l,n,a,o,i=[2,3,4,5,6,7,8,9],r=$("input"),s=$("label");for(l=0;l<r.length;l++)a=parseFloat(r.eq(l).attr("data-discount"),10),a>0&&s.eq(l).append("<span> (Скидка "+100*a+"%)</span>");t(i),e([2,6,8]),$("input[name=type-radio]").on("click",function(){t(i),n=$(this).attr("data-num").split(","),e(n),$("input[type=checkbox]:checked").removeAttr("checked")}),$("input[name=case]").on("click",function(){$(".desc-help").removeClass("show-block"),n=parseInt($(this).attr("data-num"),10),$(".desc-help").eq(n).addClass("show-block")}),$("#calculate").on("click",function(){var e=$("input:checked"),t=0,n=0;for(l=0;l<e.length;l++)a=parseFloat(e.eq(l).attr("data-discount"),10),o=parseInt(e.eq(l).val(),10),a>1e-7&&(n+=o*a),t+=parseInt(e.eq(l).val(),10);$(".block").eq(6).removeClass("hide-block").addClass("show-block"),$(".sum").eq(0).html("Без скидки: "+t),$(".sum").eq(1).html("Сумма скидки: "+n),$(".sum").eq(2).html("Итого: "+(t-n)+" (без учета цены за хостинг)")})}],link:function(){}}}),nexusApp.directive("myFooter",function(){return{restrict:"E",templateUrl:"release/tpl/my-footer.html",replace:!0,controller:["$scope",function(e){e.social=[{id:"google",xlink:"#google",url:"https://plus.google.com/+NexusstudioRu31"},{id:"facebook",xlink:"#facebook",url:"https://www.facebook.com/nexus.studio.bel/timeline#"},{id:"vk",xlink:"#vk",url:"http://vk.com/nexusstudioru"},{id:"youtube",xlink:"#youtube",url:"http://www.youtube.com/channel/UCbWoURkJ5nXueJQjWpXEraA?guided_help_flow=3"}],e.copyrightYear=(new Date).getTime()}]}}),nexusApp.directive("myPane",function(){return{require:"^myTabs",restrict:"E",transclude:!0,replace:!0,scope:{title:"@"},link:function(e,t,l,n){n.addPane(e)},templateUrl:"release/tpl/my-pane.html"}}),nexusApp.directive("myTabs",function(){return{restrict:"E",transclude:!0,scope:{},controller:["$scope",function(e){var t=e.panes=[];e.select=function(e){angular.forEach(t,function(e){e.selected=!1}),e.selected=!0},this.addPane=function(l){0===t.length&&e.select(l),t.push(l)}}],templateUrl:"release/tpl/my-tabs.html"}}),nexusApp.config(["$routeProvider","$locationProvider",function(e,t){t.html5Mode(!0),e.when("/",{redirectTo:"/home"}).when("/home",{templateUrl:"release/tpl/home.html",controller:"homeCtrl"}).when("/site",{templateUrl:"release/tpl/site.html",controller:"siteCtrl"}).when("/site/calculator",{templateUrl:"../release/tpl/calculator.html",controller:"calcCtrl"}).when("/3dgraphic",{templateUrl:"release/tpl/third.html",controller:"thirdCtrl"}).when("/application",{templateUrl:"release/tpl/application.html",controller:"applicationCtrl"}).when("/about",{templateUrl:"release/tpl/about.html",controller:"aboutCtrl"}).otherwise({redirectTo:"/404",templateUrl:"release/tpl/404.html",controller:"noneCtrl"})}]),nexusApp.directive("myInput",function(){return{restrict:"E",templateUrl:"release/tpl/text-input.html",replace:!0,link:function(e,t){t.find("input").on("blur",function(){""!==t.find("input").val()?(t.find("label").addClass("placeholder-focus"),t.find("input").addClass("text-focus")):(t.find("label").removeClass("placeholder-focus"),t.find("input").removeClass("text-focus"))})}}}),nexusApp.directive("topNav",["$location",function(e){return{restrict:"E",templateUrl:"release/tpl/top-nav.html",replace:!0,controller:function(){var e=$(".show-hide > div"),t=$(".menu");$(".show-hide").click(function(){t.toggleClass("show-menu"),e.eq(0).toggleClass("cross-top"),e.eq(1).toggleClass("op"),e.eq(2).toggleClass("cross-bot"),setTimeout(function(){e.toggleClass("reverse-trans")},400)})},link:function(t,l){var n=l.find(".menu > .bar-nav"),a=l.find(".menu > a"),o=e.$$url.slice(1);setTimeout(function(){switch(o){case"home":n.css({width:a.eq(0).innerWidth()+"px",left:a.eq(0).position().left+"px"}),a.eq(0).addClass("active-btn");break;case"site":n.css({width:a.eq(1).innerWidth()+"px",left:a.eq(1).position().left+"px"}),a.eq(1).addClass("active-btn");break;case"3dgraphic":n.css({width:a.eq(2).innerWidth()+"px",left:a.eq(2).position().left+"px"}),a.eq(2).addClass("active-btn");break;case"application":n.css({width:a.eq(3).innerWidth()+"px",left:a.eq(3).position().left+"px"}),a.eq(3).addClass("active-btn");break;case"about":n.css({width:a.eq(4).innerWidth()+"px",left:a.eq(4).position().left+"px"}),a.eq(4).addClass("active-btn")}},1e3),l.find(".menu").on("click","a",function(){a.removeClass("active-btn"),$(this).addClass("active-btn");var e=$(this).innerWidth(),t=$(this).position().left;n.css({width:e+"px",left:t+"px"})})}}}]);